<div class="details-container">
  <button (click)="anuluj()" class="button-powrot">&larr; Wróć do listy grup</button>
  <h2>Zarządzaj Grupą: {{ aktualnaGrupa()?.nazwa || grupa.nazwa }}</h2>

  <div class="form-section">
    <h3>Dodaj podmiot do grupy</h3>
    <form [formGroup]="form" (ngSubmit)="dodajCzlonka()" class="dodaj-form">
      <select formControlName="podmiotId" class="form-input">
        <option [ngValue]="null" disabled>Wybierz podmiot...</option>
        @for (p of wszystkiePodmioty(); track p.id) {
          <option [ngValue]="p.id">{{ p.nazwa }}</option>
        }
      </select>
      
      <button type="submit" class="button button-primary" [disabled]="form.invalid">
        Dodaj
      </button>
    </form>
    @if (wszystkiePodmioty().length === 0) {
      <p class="info-text">Ładowanie podmiotów...</p>
    }
  </div>

  <div class="lista-section">
    <h3>Obecni członkowie ({{ aktualnaGrupa()?.podmioty?.length || 0 }})</h3>
    @if (!aktualnaGrupa()) {
      <p class="info-text">Ładowanie danych...</p>
    } @else if (aktualnaGrupa()?.podmioty?.length === 0) {
      <p class="info-text">Ta grupa nie ma jeszcze żadnych członków.</p>
    } @else {
      <ul class="lista-czlonkow">
        @for (p of aktualnaGrupa()?.podmioty; track p.id) {
          <li>
            <span>{{ p.nazwa }}</span>
            <button (click)="usunCzlonka(p.id)" class="button-usun">
              Usuń
            </button>
          </li>
        }
      </ul>
    }
  </div>
</div>