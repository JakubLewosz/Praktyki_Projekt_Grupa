<div class="form-container">
  <h2>Zarządzaj Grupą: {{ aktualnaGrupa()?.nazwa }}</h2>
  
  <fieldset class="form-section">
    <legend>Dodaj podmiot do grupy</legend>
    <div class="add-member-form">
      
      <select 
        class="form-input"
        [ngModel]="wybranyPodmiotId()" 
        (ngModelChange)="wybranyPodmiotId.set($event)">
      <option [ngValue]="null" disabled>Wybierz podmiot...</option>
        @for (p of dostepnePodmioty(); track p.id) {
          <option [value]="p.id">{{ p.nazwa }}</option>
        }
      </select>
      
      <button (click)="dodajCzlonka()" class="button button-primary" [disabled]="!wybranyPodmiotId()">
        Dodaj
      </button>
    </div>
    @if (dostepnePodmioty().length === 0) {
      <p style="font-size: 0.9em; color: gray; margin-top: 5px;">
        Wszystkie aktywne podmioty są już przypisane do tej grupy.
      </p>
    }
  </fieldset>

  <fieldset class="form-section">
    <legend>Obecni członkowie ({{ aktualnaGrupa()?.podmioty?.length || 0 }})</legend>
    
    <div class="member-list">
      @for (czlonek of aktualnaGrupa()?.podmioty; track czlonek.id) {
        <div class="member-item">
          <span>{{ czlonek.nazwa }}</span>
          <button (click)="usunCzlonka(czlonek.id)" class="button-wyloguj">
            Usuń
          </button>
        </div>
      }
      @if (!aktualnaGrupa()?.podmioty?.length) {
        <p>Ta grupa nie ma jeszcze żadnych członków.</p>
      }
    </div>
  </fieldset>

  <div class="form-actions">
    <button type="button" class="button button-secondary" (click)="anuluj()">Wróć do listy</button>
  </div>
</div>