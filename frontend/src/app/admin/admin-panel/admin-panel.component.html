<div class="admin-layout">
  <!-- 1. PASEK BOCZNY (NAWIGACJA) -->
  <div class="sidebar">
    <div class="sidebar-header">Panel Admina</div>
    <nav>
      <button 
        [class.active]="widokGlowny() === 'podmioty'" 
        (click)="zmienWidokGlowny('podmioty')">
        üè¢ Podmioty
      </button>
      
      <button 
        [class.active]="widokGlowny() === 'grupy'" 
        (click)="zmienWidokGlowny('grupy')">
        üìÇ Grupy
      </button>
      
      <button 
        [class.active]="widokGlowny() === 'uzytkownicy'" 
        (click)="zmienWidokGlowny('uzytkownicy')">
        üë• U≈ºytkownicy
      </button>
    </nav>
  </div>

  <!-- 2. G≈Å√ìWNA TRE≈öƒÜ -->
  <div class="content">
    
    <!-- ================= SEKCJA PODMIOTY ================= -->
    @if (widokGlowny() === 'podmioty') {
      
      <!-- #podmiotList pozwala nam z≈Çapaƒá ten komponent w .ts -->
      @if (widokPodrzedny() === 'list') {
        <app-podmioty-list 
          #podmiotList 
          (chceDodacNowy)="pokazFormularz()"
          (chceEdytowac)="rozpocznijEdycjePodmiotu($event)">
        </app-podmioty-list>
      }
      
      @if (widokPodrzedny() === 'form') {
        <app-podmiot-form 
          [podmiotDoEdycji]="edytowanyPodmiot()"
          (powrot)="handlePowrotZFormularza()">
        </app-podmiot-form>
      }
    }

    <!-- ================= SEKCJA GRUPY ================= -->
    @if (widokGlowny() === 'grupy') {
      
      @if (widokPodrzedny() === 'list') {
      <app-grupy-list 
        #grupaList
        (chceDodacNowy)="pokazFormularz()"
        (chceZarzadzac)="rozpocznijZarzadzanieGrupa($event)">
      </app-grupy-list>
      }
      
      @if (widokPodrzedny() === 'form') {
        <app-grupa-form (powrot)="handlePowrotZFormularza()"></app-grupa-form>
      }

      @if (widokPodrzedny() === 'details') {
        <app-grupa-details
          [grupaDoEdycji]="edytowanaGrupa()"
          (powrot)="handlePowrotZFormularza()">
        </app-grupa-details>
      }

      <!-- NOWY WIDOK do zarzƒÖdzania cz≈Çonkami grupy -->
      @if (widokPodrzedny() === 'details') {
        <app-grupa-details
          [grupaDoEdycji]="edytowanaGrupa()"
          (powrot)="handlePowrotZFormularza()">
        </app-grupa-details>
      }
    }

    <!-- ================= SEKCJA U≈ªYTKOWNICY ================= -->
    @if (widokGlowny() === 'uzytkownicy') {
      
      @if (widokPodrzedny() === 'list') {
        <app-uzytkownicy-list 
          #userList
          (chceDodacNowy)="pokazFormularz()"
          (chceEdytowac)="rozpocznijEdycjeUzytkownika($event)"> 
        </app-uzytkownicy-list>
      }
      
      @if (widokPodrzedny() === 'form') {
        <app-uzytkownicy-form 
          [userDoEdycji]="edytowanyUzytkownik()" 
          (powrot)="handlePowrotZFormularza()">
        </app-uzytkownicy-form>
      }
    }

  </div>
</div>